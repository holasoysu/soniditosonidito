<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ciervo que se tatúa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      background: #fff;
      font-family: 'Courier New', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1rem;
    }

    svg {
      width: 300px;
      margin-bottom: 1rem;
    }

    .tattoo {
      fill: black;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    .tattoo.show {
      opacity: 1;
    }

    .eye {
      animation: blink 4s infinite;
      transform-origin: center;
    }

    @keyframes blink {
      0%, 92%, 100% { transform: scaleY(1); }
      95%, 98% { transform: scaleY(0.1); }
    }

    .question {
      max-width: 500px;
      text-align: center;
      margin-bottom: 1rem;
    }

    .answers button {
      display: block;
      margin: 0.5rem auto;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      background: #000;
      color: #fff;
      border: none;
      cursor: pointer;
    }

    .answers button:hover {
      background: #444;
    }
  </style>
</head>
<body>

  <!-- Ciervo SVG -->
  <svg id="ciervo" viewBox="0 0 200 150">
    <!-- cuerpo (simplificado con forma animal) -->
    <ellipse cx="100" cy="100" rx="50" ry="30" fill="#ccc" />
    <rect x="75" y="120" width="10" height="30" fill="#ccc" />
    <rect x="115" y="120" width="10" height="30" fill="#ccc" />
    <!-- cuello -->
    <rect x="120" y="70" width="15" height="20" fill="#ccc" />
    <!-- cabeza -->
    <circle cx="135" cy="65" r="10" fill="#ccc" />
    <!-- oreja -->
    <polygon points="142,55 148,50 140,60" fill="#ccc" />
    <!-- ojo -->
    <circle cx="136" cy="65" r="2" fill="#000" class="eye"/>

    <!-- tatuajes (creados dinámicamente en JS) -->
  </svg>

  <!-- Pregunta -->
  <div class="question" id="questionText">
    ¿Qué canción suena mientras saltas?
  </div>

  <!-- Respuestas -->
  <div class="answers" id="answers">
    <button onclick="selectAnswer(1, 'https://www.youtube.com/watch?v=M9wo5N4lZS0')">flores en mi cora</button>
    <button onclick="selectAnswer(2, 'https://www.youtube.com/watch?v=Jr4y9oVS8rk')">del cielo al suelo</button>
    <button onclick="selectAnswer(3, 'https://www.youtube.com/watch?v=FpslVgJrty8')">ella se olvidó de mí</button>
  </div>

  <!-- Audios -->
  <audio id="audio1" src="cierva1.m4a" preload="auto"></audio>
  <audio id="audio2" src="cierva2.m4a" preload="auto"></audio>
  <audio id="audio3" src="cierva3.m4a" preload="auto"></audio>

  <script>
    let currentStep = 1;
    const audios = [
      document.getElementById('audio1'),
      document.getElementById('audio2'),
      document.getElementById('audio3')
    ];

    function showTattoo() {
      const svg = document.getElementById("ciervo");
      const cx = Math.random() * 80 + 60; // zona cuerpo
      const cy = Math.random() * 40 + 80;
      const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      circle.setAttribute("cx", cx);
      circle.setAttribute("cy", cy);
      circle.setAttribute("r", 3);
      circle.setAttribute("class", "tattoo show");
      svg.appendChild(circle);
    }

    function selectAnswer(choice, link) {
      showTattoo();

      if (currentStep === 1) {
        window.open(link, "_blank");

        // ir a segunda pregunta
        document.getElementById("questionText").innerText = "¿Qué sonido es una cierva?";
        document.getElementById("answers").innerHTML = `
          <button onclick="playAudio(0)">audio 1</button>
          <button onclick="playAudio(1)">audio 2</button>
          <button onclick="playAudio(2)">audio 3</button>
        `;
        currentStep = 2;
      }
    }

    function playAudio(index) {
      // parar todos
      audios.forEach((audio, i) => {
        if (i !== index) {
          audio.pause();
          audio.currentTime = 0;
        }
      });
      // reproducir el elegido
      audios[index].play();
      showTattoo();
    }
  </script>
</body>
</html>
